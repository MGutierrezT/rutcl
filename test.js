const test = require('ava')
const { clean, validate, format, getDigit } = require('./index')

test('clean', t => {
    t.is(clean('202880207'), '202880207')
    t.is(clean('20.288.020-7'), '202880207')
    t.is(clean('19.670.978-9'), '196709789')
    t.is(clean('20*129*969-1'), '201299691')
    t.is(clean('0020.288.020-7'), '202880207')
    t.is(clean('00000202880207'), '202880207')
})

test('validate', t => {
    t.true(validate('20.288.020-7'))
    t.true(validate('20288020-7'))
    t.true(validate('202880207'))
    t.true(validate('19.670.978-9'))
    t.true(validate('19670978-9'))
    t.true(validate('196709789'))
    t.true(validate(196709789))

    t.false(validate('20.288.020-0'))
    t.false(validate('20,288,020-7'))
    t.false(validate('20*288*020-7'))
    t.false(validate('20-288-020-7'))
    t.false(validate('error20.288.020-7'))
    t.false(validate('19670978-8'))
    t.false(validate(''))
    t.false(validate('0'))
    t.false(validate(0))
})

test('format', t => {
    t.is(format('20.288.020-7'), '20.288.020-7')
    t.is(format('202880207'), '20.288.020-7')
    t.is(format('20*288*020*7'), '20.288.020-7')
    t.is(format('19670978-9'), '19.670.978-9')
    t.is(format('20.288.020-7',{dots: false}), '20288020-7')
    t.is(format('20288020-7',{dots: false}), '20288020-7')
    t.is(format('20*288*020-7',{dots: false}), '20288020-7')
    t.is(format('19670978-9',{dots: false}), '19670978-9')
})

test('getDigit', t => {
    t.is(getDigit('20.288.020'), '7')
    t.is(getDigit('20288020'), '7')
    t.is(getDigit('20288020'), '7')
    t.is(getDigit('19.670.978'), '9')
    t.is(getDigit('19670978'), '9')
    t.is(getDigit('19670978'), '9')
    t.is(getDigit('20.129.969'), '1')
    t.is(getDigit('20129969'), '1')
    t.is(getDigit('20129969'), '1')
})
